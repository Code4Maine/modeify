#!/usr/bin/env node

// Environment vars

var env = process.env.NODE_ENV;
var port = process.env.PORT || 5000;

/**
 * Dependencies
 */

var app = require('../lib/express');
var log = require('../lib/log');

// If `NODE_ENV` is not set throw

if (process.env.NODE_ENV === undefined) throw new Error('Envrionment variables must be set. See `.env.tmp`.');

// If environment is `development`, build on load

if (env === 'development') require('./build');

// Run the server

app.listen(port, function() {
  log.info('express server listening on port ' + port);
});
